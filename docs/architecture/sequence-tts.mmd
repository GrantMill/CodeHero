sequenceDiagram
  participant User
  participant Browser as Browser (AgentsChat)
  participant Web as Web (CodeHero.Web)
  participant Speech as ISpeechService
  participant AzureSpeech as Azure Speech
  participant HttpTts as tts-http (Docker)

  User->>Browser: Click "Speak last"
  Browser->>Web: POST /api/tts?voice=...
  Web->>Speech: SynthesizeAsync(text, voice)
  alt Azure Speech configured
    Speech->>AzureSpeech: TTS
    AzureSpeech-->>Speech: audio/wav
  else Local HTTP TTS configured
    Speech->>HttpTts: POST /tts (text/plain)
    HttpTts-->>Speech: audio/wav
  else Not configured
    Speech-->>Web: silent WAV
  end
  Web-->>Browser: audio/wav
  Browser-->>User: play audio
